#pragma once

// This file is generated by CMake from version.hpp.in
// Do not edit this file directly.

#define BYTESTREAM_VERSION_MAJOR @BYTESTREAM_VERSION_MAJOR@
#define BYTESTREAM_VERSION_MINOR @BYTESTREAM_VERSION_MINOR@
#define BYTESTREAM_VERSION_PATCH @BYTESTREAM_VERSION_PATCH@

#define BYTESTREAM_VERSION_SUFFIX "@BYTESTREAM_VERSION_SUFFIX@"
#define BYTESTREAM_GIT_HASH       "@BYTESTREAM_GIT_HASH@"

#define BYTESTREAM_HAS_SUFFIX @BYTESTREAM_HAS_SUFFIX@
#define BYTESTREAM_HAS_GIT    @BYTESTREAM_HAS_GIT@

#ifndef BYTESTREAM_NAME
#  define BYTESTREAM_NAME "bytestream"
#endif

#define BYTESTREAM_STR_HELPER(x) #x
#define BYTESTREAM_STR(x)        BYTESTREAM_STR_HELPER(x)

#define BYTESTREAM_VERSION_HEX \
  ((BYTESTREAM_VERSION_MAJOR << 16) | (BYTESTREAM_VERSION_MINOR << 8) | (BYTESTREAM_VERSION_PATCH))

#define BYTESTREAM_VERSION_STRING_BASE \
  BYTESTREAM_STR(BYTESTREAM_VERSION_MAJOR) "." \
  BYTESTREAM_STR(BYTESTREAM_VERSION_MINOR) "." \
  BYTESTREAM_STR(BYTESTREAM_VERSION_PATCH)

#if BYTESTREAM_HAS_SUFFIX && BYTESTREAM_HAS_GIT
#  define BYTESTREAM_VERSION_STRING BYTESTREAM_VERSION_STRING_BASE "-" BYTESTREAM_VERSION_SUFFIX " (" BYTESTREAM_GIT_HASH ")"
#elif BYTESTREAM_HAS_SUFFIX && !BYTESTREAM_HAS_GIT
#  define BYTESTREAM_VERSION_STRING BYTESTREAM_VERSION_STRING_BASE "-" BYTESTREAM_VERSION_SUFFIX
#elif !BYTESTREAM_HAS_SUFFIX && BYTESTREAM_HAS_GIT
#  define BYTESTREAM_VERSION_STRING BYTESTREAM_VERSION_STRING_BASE " (" BYTESTREAM_GIT_HASH ")"
#else
#  define BYTESTREAM_VERSION_STRING BYTESTREAM_VERSION_BASE
#endif

#define BYTESTREAM_COMPLETE_NAME BYTESTREAM_NAME " " BYTESTREAM_VERSION_STRING

#ifdef __cplusplus
extern "C" {
#endif

static inline unsigned bytestream_version_major(void) { return BYTESTREAM_VERSION_MAJOR; }
static inline unsigned bytestream_version_minor(void) { return BYTESTREAM_VERSION_MINOR; }
static inline unsigned bytestream_version_patch(void) { return BYTESTREAM_VERSION_PATCH; }
static inline unsigned bytestream_version_hex(void)   { return BYTESTREAM_VERSION_HEX; }

#ifdef __cplusplus
} /* extern "C" */
#endif

#if defined(__cplusplus)
#include <cstdint>
#include <string_view>

namespace bytestream {

inline constexpr std::uint32_t version_major = BYTESTREAM_VERSION_MAJOR;
inline constexpr std::uint32_t version_minor = BYTESTREAM_VERSION_MINOR;
inline constexpr std::uint32_t version_patch = BYTESTREAM_VERSION_PATCH;
inline constexpr std::uint32_t version_hex   = BYTESTREAM_VERSION_HEX;

inline constexpr bool has_suffix = (BYTESTREAM_HAS_SUFFIX != 0);
inline constexpr bool has_git    = (BYTESTREAM_HAS_GIT != 0);

inline constexpr std::string_view version_suffix = std::string_view(BYTESTREAM_VERSION_SUFFIX);
inline constexpr std::string_view git_hash       = std::string_view(BYTESTREAM_GIT_HASH);
inline constexpr std::string_view version_string = std::string_view(BYTESTREAM_VERSION_STRING);
inline constexpr std::string_view name           = std::string_view(BYTESTREAM_NAME);
inline constexpr std::string_view complete_name  = std::string_view(BYTESTREAM_COMPLETE_NAME);

struct version_info {
    std::uint32_t major;
    std::uint32_t minor;
    std::uint32_t patch;
    std::uint32_t hex;
    std::string_view suffix;
    std::string_view git;
    std::string_view string;
    std::string_view lib_name;
    std::string_view complete;
    bool has_suffix;
    bool has_git;
};

inline constexpr version_info info() noexcept {
    return version_info{
        version_major,
        version_minor,
        version_patch,
        version_hex,
        version_suffix,
        git_hash,
        version_string,
        name,
        complete_name,
        has_suffix,
        has_git
    };
}

} // namespace bytestream
#endif // __cplusplus
